# Google Cloud Run + Neon PostgreSQL Production Configuration
# Bu environment variables'ları Cloud Run service'te tanımlayın

# === NEON DATABASE CONFIGURATION ===
# NOT: DATABASE_URL Google Secret Manager'dan alınıyor (secret name: database-url)
# Secret Manager'da şu formatta saklanmalı:
# postgresql://user:pass@ep-xxx.region.aws.neon.tech/dbname?sslmode=require

# Neon branching support (optional)
NEON_BRANCH_NAME=main
NEON_COMPUTE_ENDPOINT=ep-sweet-queen-adgf6kf6-pooler.c-2.us-east-1.aws.neon.tech

# === SECURITY SECRETS ===
# NOT: Bu secrets Google Secret Manager'dan alınıyor:
# - JWT_SECRET -> secret name: jwt-secret
# - HASHING_SECRET_KEY -> secret name: hashing-secret
# Environment variables'a eklenmemeli!

# === GOOGLE CLOUD CONFIGURATION ===
# Secret Manager için
GCP_PROJECT_ID=velvety-matter-471516-n4
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# === APPLICATION CONFIGURATION ===
# Cloud Run PORT
PORT=8080
HOST=0.0.0.0

# Rust environment
RUST_ENV=production
RUST_LOG=info
RUST_BACKTRACE=0

# === PERFORMANCE TUNING ===
# Neon-specific optimizations
MAX_DB_CONNECTIONS=20
MIN_DB_CONNECTIONS=5
DB_ACQUIRE_TIMEOUT=8
DB_IDLE_TIMEOUT=300
DB_MAX_LIFETIME=1800

# Request handling
REQUEST_TIMEOUT=30
MAX_REQUEST_SIZE=1048576

# === CORS & SECURITY ===
FRONTEND_URL=https://your-frontend-domain.com
ALLOWED_ORIGINS=https://your-domain.com,https://admin.your-domain.com

# === MONITORING & LOGGING ===
# Cloud Logging
GOOGLE_CLOUD_LOGGING=true
LOG_LEVEL=info
ENABLE_REQUEST_TRACING=true

# Error tracking
ENABLE_ERROR_CORRELATION=true
ERROR_REPORTING_PROJECT_ID=velvety-matter-471516-n4

# === NEON SPECIFIC OPTIMIZATIONS ===
# Connection timeouts for serverless
CONNECT_TIMEOUT=10
STATEMENT_TIMEOUT=30000
IDLE_IN_TRANSACTION_TIMEOUT=60000

# SSL settings for Neon
SSL_MODE=require
SSL_CERT_PATH=/etc/ssl/certs/ca-certificates.crt

# === HEALTH CHECK CONFIGURATION ===
HEALTH_CHECK_TIMEOUT=15
HEALTH_CHECK_INTERVAL=30

# === FEATURE FLAGS ===
ENABLE_RATE_LIMITING=true
ENABLE_CORS=true
ENABLE_COMPRESSION=true
ENABLE_REQUEST_LOGGING=true

# === OPTIONAL: NEON BRANCHING FOR ENVIRONMENTS ===
# Production branch
NEON_PRODUCTION_BRANCH=main
# Staging branch  
NEON_STAGING_BRANCH=staging
# Development branch
NEON_DEVELOPMENT_BRANCH=dev